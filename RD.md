# 天気通知アプリ要件定義書

---

## 1. プロジェクト概要

**アプリ名（仮）**: 「シンガポール天気アラート」

**目的**: 突然の雨に対応するため、主婦や屋外作業者が効率的に天気を把握し、家事や作業が影響を受けないようサポートする。

**対象ユーザー**: 特にシンガポールの主婦層（洗濯物を外干しするユーザー）を想定。

---

## 2. コア機能

1. **天気データ取得**
   - シンガポール環境省のAPIから、リアルタイムの降雨量データを数分ごとに取得し、ユーザーの最寄りのウェザーステーションからの情報を活用。
   - 風速・風向きの情報も使用し、雨雲の接近予測を行う。

2. **位置情報取得**
   - ユーザーの位置情報を取得し、最も近いウェザーステーションのデータを参照。

3. **通知機能**
   - 降雨が接近中または降り始めた際に、プッシュ通知を送信。
   - 通知は1つの雨雲に対して1回のみ発信し、再発しないように制御。
   - サウンドとバイブレーションの有無、通知タイミングのカスタマイズが可能。

---

## 3. 詳細機能

### 3.1 通知設定のカスタマイズ

- **通知タイミング**: 洗濯物を干した後など、必要なタイミングで通知をオンにする設定。
- **通知の種類**: 「接近中」または「降り始め」の2段階で通知内容を切り分け。
- **通知サウンドとバイブレーション**: 通知のサウンド、バイブレーションの有無をユーザーが選択可能。
- **通知優先度設定**: 高・中・低の3段階で優先度を設定し、重要な通知はサウンドやバイブ付きで表示、低優先度の通知は静かに通知センターへ。

### 3.2 リアルタイム性の確保

- **更新間隔の設定**: データの更新間隔を数分ごとに設定し、一定の変動がない限りキャッシュ機能で最適化。
- **バックオフアルゴリズム**: 雨がない場合は更新間隔を徐々に広げ、降雨予測や発生時にはリアルタイム性を高める。

### 3.3 インターフェースとユーザビリティ

- **シンプルで直感的なUI**: 雨雲データの粒度に応じて、ステーションごとの情報のみをシンプルに表示。
- **位置情報の自動設定**: 初回位置情報許可後、自動で最寄りのウェザーステーションを取得。
- **通知履歴**: 過去の通知履歴を保存し、ユーザーが確認可能。

### 3.4 初回起動ガイド・チュートリアル

- **操作ガイド**: 初回起動時に通知設定や位置情報の使い方を簡単に説明するチュートリアルを表示。
- **ヘルプセクション**: 設定変更やトラブルシューティングのガイドを用意。

---

## 4. パフォーマンスとセキュリティ

### 4.1 パフォーマンス

- **バッテリー最適化**: 更新間隔の調整やバックグラウンドデータ取得を最適化し、バッテリー消費を抑える設計。
- **API使用の効率化**: キャッシュ機能やバックオフアルゴリズムを活用し、無駄なAPIアクセスを防止。

### 4.2 セキュリティ

- **位置情報のプライバシー保護**: 位置データの取得について、アプリ内で使用される旨を明確に記述。
- **APIキーの保護**: APIキーは環境変数で管理し、サーバーアクセスのセキュリティを確保。

### 4.3 データ管理

- **通知内容の最適化**: 最新の天気データが取得できなかった場合、前回のデータを利用して通知の誤差を減少。

---

## 5. 将来的な拡張

- **ユーザーフィードバックの収集**: アプリ内で簡単なフィードバックを収集し、通知や機能の改善に反映。
- **新機能の追加可能性**: 将来的に雷予測、湿度などの追加気象データを反映するための構造を持たせる。
- **利用データの分析**: 匿名化された使用データ（通知の反応率や利用頻度など）を収集し、継続的な改善に役立てる。

---

## 6. 開発と運用インフラ

- **冗長性とバックアップ**: APIの使用制限や障害に備え、予備の気象APIをバックアップに設定。
- **スケーラビリティ**: ユーザーが増加した場合に対応可能なクラウドインフラやデータベース設計。

---

## 7. 成果物

- **アプリのリリース**: AndroidとiOS向けのReact Nativeアプリとしてリリース。
- **プライバシーポリシーとヘルプページ**: アプリ内にプライバシーポリシーと使用ガイドを掲載し、ユーザーの信頼を確保。
